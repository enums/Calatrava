<html>
<head>
	<meta charset="utf-8"> 
	<meta name="viewport" content="user-scalable=no, width=720px, height=1280px"/>
	<title>{{_pjango_param_posts_title}} | {{_pjango_param_title_message}}</title>
	<link rel="icon" href="/img/favicon.png" type="image/png">
	<link rel="stylesheet" href="/css/bootstrap.min.css">  
	<link rel="stylesheet" href="/css/font-awesome.min.css"> 
	<link rel="stylesheet" href="/css/buttons.css">  
	<link rel="stylesheet" href="/css/height.css">  
	<link rel="stylesheet" href="/css/me.css"> 
	<link rel="stylesheet" href="/css/markdown.css">   
	<script src="/js/jquery.min.js"></script>
	<script src="/js/bootstrap.min.js"></script>
	<script src="/js/buttons.js"></script>
	<script src="/js/me.js"></script>
</head>
<style>
	div.title {
		height: 300px;
	}
	div.paper {
		background-color: white
	}
	div.text-gap {
		height: 60px;
	}
	div.paper-gap {
		height: 120px;
	}
	div.paper-end-gap {
		height: 60px;
	}
	div.comment_refer {
		background-color: #efefef;
	}
	div.comment_refer_comment {
		cursor: hand;
		background-color: #e8e8e8;
		width: 100%;
	}
	div.comment_refer_comment:hover {
		background-color: #e1e1e1;
	}
	div.author {
		height: 240px;
	}
	div.end {
		height: 40px;
	}
	p.title {
		font-size: 36px;
	}
	p.author {
		font-size: 20px;
	}
	p.end {
		font-size: 20px;
	}
	i.date {
		color: grey;
		font-size: 16px;
		font-weight: lighter;
	}
	p.comment_author {
		font-size: 20px;
		font-weight: bold;
	}
	p.comment {
		font-size: 18px;
	}
	a.end-button {
		color: white;
		font-size: 18px;
		margin-top: 4px;
		margin-bottom: 4px;
	}
	a.tag {
		font-size: 18px;
	}
</style>
<body class="main">

<div class="box">
	
{{{_pjango_template_navigation_bar}}}
	
	<div class="col-md-12 column height-more-than-85">
		<div class="paper-gap"></div>

		<div class="col-md-8 col-md-offset-2 column paper grey-shadow">
			
			<div class="text-gap"></div>
			<div class="col-md-12 column title">
				<div class="col-md-12 column height-30"></div>
				<div class="col-md-12 column height-60">
					<p class="text-center title">{{_pjango_param_posts_title}}</p>
				</div>
				<div class="col-md-12 column height-10">
					<div class="col-md-4 column text-center pull-left">
						<i class="fa fa-fw fa-calendar date"></i>
						<i class="date">发布于: {{_pjango_param_posts_date}}</i>
					</div>
					<div class="col-md-3 column text-center pull-left">
						<i class="fa fa-fw fa-coffee date"></i>
						<i class="date">阅读: {{_pjango_param_posts_read}}</i>
					</div>
					<div class="col-md-2 column text-center pull-left">
						<i class="fa fa-fw fa-comment date"></i>
						<i class="date">评论: {{_pjango_param_posts_comment}}</i>
					</div>
					<div class="col-md-3 column text-center pull-left">
						<i class="fa fa-fw fa-heart date"></i>
						<i class="date">喜欢: {{_pjango_param_posts_love}}</i>
					</div>
				</div>
			</div>					
			<div class="col-md-12 column author">
				<hr />
				<div class="col-md-10 column col-center">
					<p class="author"><i class="fa fa-fw fa-angle-right"></i>作者：<a style="color: #145d7e" href='http://{{_pjango_param_host}}'><i>{{_pjango_param_name}}</i></a></p>
					<p class="author"><i class="fa fa-fw fa-angle-right"></i>原文链接：<a style="color: #145d7e" href='http://{{_pjango_param_host}}/corpus/article/{{_pjango_param_posts_cpid}}'>http://{{_pjango_param_host}}/corpus/article/{{_pjango_param_posts_cpid}}</a></p>
				</div>
				<hr />
			</div>
			<div class="text-gap"></div>
			<div class="col-md-10 col-md-offset-1 column">
{{{_pjango_template_posts_text}}}
			</div>
			
			<div class="text-gap"></div>
			<div class="col-md-12 column">
				<hr />
				<div class="col-md-11 column col-center">
					<p class="end"><i class="fa fa-fw fa-angle-right"></i>Thanks for reading.</p>
					<p class="end"><i class="fa fa-fw fa-angle-right"></i>All the best wishes for you! 💕</p>
				</div>
				<hr />
				<div class="col-md-11 column col-center">
					<div class="col-md-3 column col-center" style="min-width: 240px">
						<a class="button button-block button-rounded button-caution end-button" onclick="love({{_pjango_param_posts_cpid}})">喜欢这篇文章</a>
					</div>
				</div>
				<hr />
				<div class="col-md-12 column archive-cell">
{{#_pjango_param_table_comment}}
					<i class="date pull-right" id="comment_floor_{{{_pjango_param_table_CorpusPostsComment_FLOOR}}}">{{_pjango_param_table_CorpusPostsComment_FLOOR}} 楼</i>
					<p class="comment_author">{{#_pjango_param_table_CorpusPostsComment_ISADMIN}}<i class="fa fa-fw fa-star" style="color: red"></i>{{/_pjango_param_table_CorpusPostsComment_ISADMIN}}{{_pjango_param_table_CorpusPostsComment_NAME}}</p>
{{#_pjango_param_table_CorpusPostsComment_HAVE_REFER}}
					<p class="comment_refer">
						<div class="col-md-12 comment_refer corner-window">
							<i class="date">引用了以下评论：</i>
							<div class="col-md-12 comment_refer_comment corner-window" onclick="location='#comment_floor_{{{_pjango_param_table_CorpusPostsComment_REFER_FLOOR}}}'">
								<i class="date pull-right">{{_pjango_param_table_CorpusPostsComment_REFER_FLOOR}} 楼</i>
								<p class="comment_author">{{#_pjango_param_table_CorpusPostsComment_REFER_ISADMIN}}<i class="fa fa-fw fa-star" style="color: red"></i>{{/_pjango_param_table_CorpusPostsComment_REFER_ISADMIN}}{{_pjango_param_table_CorpusPostsComment_REFER_NAME}}</p>
								<p class="comment">{{_pjango_param_table_CorpusPostsComment_REFER_COMMENT}}</p>
								<i class="date">发表于 {{_pjango_param_table_CorpusPostsComment_REFER_DATE}} </i>
							</div>
							<div class="col-md-12" style="height: 20px"></div>
						</div>
					</p>
{{/_pjango_param_table_CorpusPostsComment_HAVE_REFER}}
					<p class="comment">{{_pjango_param_table_CorpusPostsComment_COMMENT}}</p>
					<i class="date">发表于 {{_pjango_param_table_CorpusPostsComment_DATE}} </i>
					<a class="button button-rounded button-small button-primary pull-right" onclick="setReferFloor({{{_pjango_param_table_CorpusPostsComment_FLOOR}}})">引用</a>
					<hr />
{{/_pjango_param_table_comment}}
				</div>
				<div class="col-md-12 column">
					<div class="col-md-6 column">
					    <label for="name">昵称</label>
					    <input type="text" class="form-control" id="name" placeholder="请输入名称">
					</div>
					<div class="col-md-6 column">
					    <label for="email">邮箱</label>
					    <input type="text" class="form-control" id="email" placeholder="请输入邮箱">
					</div>
					<div class="col-md-12 column">
					    <label for="name">评论</label>
					    <textarea class="form-control" rows="4" id="comment" placeholder="请输入评论"></textarea>
					</div>
					<div class="col-md-12 column">
					    <label for="verification">人机校验  <button class="button button-tiny button-border button-circle button-primary" onclick="getVerification()"><i class="fa fa-fw fa-refresh"></i></button></label>
						<p id="verification_question"></p>
					    <input type="text" class="form-control" id="verification" placeholder="请输入答案">
					</div>
					<div class="col-md-12 column" style="height: 20px;"></div>
					<div class="col-md-12 column">
						<a class="button button-block button-rounded button-primary end-button" onclick="comment()">发表评论</a>
					<hr />
					</div>
				</div>
				<div class="col-md-12 column">
					<a class="button button-block button-rounded button-primary end-button" onclick="toTop()">回到顶部</a>
				</div>
			</div>
			<div class="col-md-12 column end"></div>
		</div>
		<div class="col-md-12 column paper-end-gap"></div>

	</div>
	
{{{_pjango_template_footer_bar}}}
</div>
<script>
	function love(pid) {
		_corpus_love(pid);
	}
	
	function comment() {
		var cpid = {{_pjango_param_posts_cpid}};
		var name = $("#name").val();
		var email = $("#email").val();
		var comment = $("#comment").val();
		var v_a = $("#verification").val();
		_corpus_comment(cpid, name, email, comment, v_id, v_a, function() {
			location.reload();
			setCookie("comment_name", name);
			setCookie("comment_email", email);
		}, function() {
			getVerification();
		});
	}
	
	var v_id = "";
	
	function getVerification() {
		_getVerification(function(text) {
			var strs = text.split("@");
			$("#verification_question").text(strs[0]);
			v_id = strs[1];
		})
	}
	
	function setReferFloor(floor) {
		_setReferFloor(floor);
	}
	
	getVerification();
	
	$("#name").val(getCookie("comment_name"));
	$("#email").val(getCookie("comment_email"));
	
</script>
</body>
</html>

